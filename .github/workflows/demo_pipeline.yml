name: Demo pipeline
on: push

jobs:

  ##########################
  #  SETUP STAGE
  ##########################
  setup-stage:
    runs-on: ubuntu-latest
    env:
      NAME: General Kenobi
    steps:
      - name: Greet
        run: |
          echo "Hello there"
          echo "$NAME"

  ##############################################################################
  #  ACTIONS DEMO STAGE
  ##############################################################################
  # Market-place link –> https://github.com/marketplace/actions/add-pr-comment
  # Custom action link –> https://github.com/jeskepetr/github-actions-by-pj
  # Gooddata Github actions -> https://github.com/gooddata/github-actions
  ##############################################################################
  actions-demo-stage:
    runs-on: ubuntu-latest
    needs: setup-stage
    permissions:
      pull-requests: write
    steps:
      - name: Add pr comment
        uses: mshick/add-pr-comment@v2
        with:
          message: "**Hello** 🌏 !"
      - name: Call custom action
        uses: jeskepetr/github-actions-by-pj/demo@main
